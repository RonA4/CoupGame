<div dir="rtl", "lang"="he">

# מטלה מספר 3 - קו (coup)

-----
במטלה זו מימשתי את המשחק הבא 

קו (coup - הפיכה) הוא משחק קופסה עבור 2-6 שחקנים המשחקים אחד נגד השני כדי להישאר אחרונים על המגרש.
במטלה זו נממש חלק מחוקי המשחק

במהלך המטלה עבדנו על הבנת החומר הנלמד בהרצאה החמישית והשישית כגון: כלל השלושה, ירושה וירטואלית וירושה רגילה.
----

---
## חוקי המשחק
בתחילת המשחק כל שחקן שולף קלף מהערימה. כל קלף מתאר  תפקיד אותו יכול לממש השחקן.  במרכז השולחן ישנה קופה של מטבעות. כל שחקן בתורו משחק לפי התפקיד אליו משתייך (פירוט התפקידים בהמשך) ויכול לקחת מטבעות בהתאם. מטרת המשחק היא להוציא לפועל "הפיכות" ולהדיח שחקנים אחרים מתפקידם. השחקן האחרון שנשאר בעל תפקיד מנצח.

 
- לכל שחקן יש שם, תפקיד ומטבעות. 
בכל תור יכול שחקן, בלי קשר לתפקידו, לבצע את אחת מהפעולות הבאות:

</div>
<div dir = "rtl">

- איסוף משאבים (gather) - השחקן מקבל מטבע אחד מהקופה. לפעולה זו אין עלות והיא ניתנת לחסימה באמצעות חרם.
- מס (tax) - השחקן מקבל שני מטבעות מהקופה. פעולה זו אינה עולה דבר, אך תפקידים מסוימים או פעולות מסוימות יכולים לחסום אותה.
- שוחד (bribe) - השחקן משלם 4 מטבעות כדי לבצע פעולה נוספת בתורו.
- מעצר (arrest) - השחקן בוחר שחקן אחר ולוקח ממנו מטבע אחד. לא ניתן להשתמש בה על אותו שחקן פעמיים ברציפות.
- חרם (sanction) - השחקן בוחר שחקן אחר ומונע ממנו להשתמש בפעולות כלכליות (gather, tax) עד לתורו הבא. עלות פעולה זו היא 3 מטבעות.
- הפיכה (coup) - השחקן בוחר שחקן אחר ומדיח אותו לחלוטין מהמשחק. עלות פעולה זו היא 7 מטבעות, והיא ניתנת לחסימה בתנאים מסוימים בלבד.
-צפייה (watch)- פעולה המורשת רק למרגל (spy) , מאפשרת לו להחשף לכמות המטבעות של שחקן אחר ולחסום אותו משימוש בפעולת מעצר (arrest),פעולה זו לא נחשבת לתור ולא עולה במטעות .
-השקעה (invest)- פעולה המורשת רק ל(baron),דרך פעולה זו הברון יכול להשקיע 3 מטבעות ולקבל תמורה 6 ,פעולה זו נחשבת כתור.
  
כל פעולה צריכה לעדכן את מספר המטבעות אותם מחזיק השחקן בהתאם.  
אם הפעולה לא חוקית, אז נזרקת חריגה מתאימה.
 
</div>
<div dir = "rtl">
 
 ---

 <div dir = "rtl">
  
#### תפקידים
למשחק יש מספר תפקידים, ולכל אחד מהם יכולות ייחודיות:

</div>
<div dir = "rtl">


- נציב (Governor) - לוקח 3 מטבעות מהקופה במקום 2 כשהוא משתמש בפעולת מס (tax). בנוסף, הוא יכול לבטל פעולת מס (tax) של שחקנים אחרים.

- מרגל (Spy) - יכול לראות את כמות המטבעות של שחקן אחר ולמנוע ממנו להשתמש בפעולת מעצר (arrest) בתורו הבא. פעולה זו אינה עולה מטבעות ואינה נחשבת לתור.

- ברון (Baron) - יכול "להשקיע" 3 מטבעות ולקבל בתמורה 6 מטבעות. בנוסף, אם הוא מותקף באמצעות חרם (sanction), הוא מקבל מטבע אחד כפיצוי (כלומר, מכל התהליך הוא יכול להפסיד לכל היותר מטבע אחד אם השתמש במס).

- גנרל (General) - יכול לשלם 5 מטבעות כדי למנוע הפיכה (coup) נגד שחקן אחר (או נגד עצמו) שימו לב שבמקרה הזה השחקן שביצע את ההפיכה מפסיד את המטבעות ששילם. בנוסף, אם הוא נפגע באמצעות מעצר (arrest), הוא מקבל בחזרה את המטבע שנלקח ממנו.

- שופט (Judge) - יכול לבטל פעולת שוחד (bribe) של שחקן אחר, מה שגורם לו להפסיד את 4 המטבעות ששילם. בנוסף, אם הוא מותקף באמצעות חרם (sanction), השחקן שהטיל עליו את החרם צריך לשלם מטבע נוסף לקופה.

- סוחר (Merchant) - אם הוא מתחיל תור עם 3 מטבעות לפחות, הוא מקבל מטבע נוסף בחינם. בנוסף, אם הוא מותקף באמצעות מעצר (arrest), הוא משלם שני מטבעות לקופה במקום לאבד אחד לשחקן אחר.

  </div>
<div dir = "rtl">

#### הארות:

- יכולים להיות שני שחקנים או יותר בעלי אותו תפקיד - לא קורה שום דבר מיוחד במצב זה.

- אם שחקן מחזיק 10 מטבעות בתחילת תורו, הוא חייב לבצע הפיכה באותו תור

- התורות נקבעים לפי סדר הצטרפות למשחק 

#### לוח המשחק 
בכל רגע נתון יודעים 
- מה מצבו של כל שחקן 
-מי המנצח 
-המשחק יודע מי הבא בתור 
- לכל משחק יש את השחקנים שמשחקים בו 


- תור - `turn` - הדפסת שם השחקן אשר תורו לשחק כעת.
- שחקנים פעילים - `players` - השיטה מחזירה את שמות השחקנים שפעילים כעת במשחק.
- מנצח - `winner` - השיטה מחזירה את שם המנצח. אם המשחק עדיין פעיל, השיטה תזרוק שגיאה.

</div>
<div dir = "rtl">
 
---

</div>
<div dir = "rtl">

#### ממשק גרפי (GUI) -
ממשק גרפי  שנבנה  באמצעות הספרייה SFML, המאפשר לשחקנים לשחק במשחק התפקידים בסגנון Coup בצורה ויזואלית ונוחה. כל שחקן מיוצג בתיבה צבעונית עם שמו והתפקיד שלו, ותור השחקן הנוכחי מודגש בראש המסך.

- הצגת השחקנים ---> כל שחקן מוצג עם תיבה בצבע אישי עם שם ותפקיד 
- כפתורי הפעולה  gather, tax, bribe, arrest, sanction, coup, watch, invest 
- הצגת התור - בראש המסך מוצג מיהו השחקן הנוכחי בתור 
- פעולות כמו tax, bribe, coup ניתנות לחסימה על ידי שחקנים בתקפידים Governor, Judge, General
- הודעת ניצחון ---> קפיצה לחלון סיום ייחודי כאשר נותר שחקן אחד 

</div>
<div dir = "rtl">

--- 
### מבנה הפרויקט
הפרויקט בנוי בצורה מודולרית, עם חלוקה נפרדת ללוגיקת המשחק, תפקידי הדמויות, קוד הבדיקות, וממשק גרפי

EX3_COUP/
│
├── game/             ← מכיל את לוגיקת הליבה של המשחק (Game, Player)
├── roles/            ← מכיל מימושים של תפקידים שונים (Baron, Spy, General , Governor , Judge ,Merchant)
├── GUI/              ← קוד הממשק הגרפי (gui.cpp)
├── test/             ← בדיקות יחידה באמצעות doctest
├── main.cpp          ← קובץ ההרצה הראשי
├── makefile          ← סקריפט לקימפול כל הפרויקט
└── README.md         ← קובץ תיעוד זה


---

#### קובץ `Makefile`:
- הפקודה `make Main` – להרצת קובץ ההדגמה.
- הפקודה `make test` – להרצת בדיקות היחידה.
- הפקודה `make valgrind` – בדיקת זליגת זיכרון באמצעות valgrind.
- הפקודה `make clean` - מוחקת את כל הקבצים הלא רלוונטיים לאחר ההרצה.


בהצלחה!

</div>

